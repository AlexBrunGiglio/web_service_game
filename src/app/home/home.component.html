<mat-toolbar>
    <button mat-icon-button>
        <mat-icon>menu</mat-icon>
    </button>
    <span>Web Services Game</span>
</mat-toolbar>

<div class="flex-content">
    <div class="status" *ngIf="getTokenFromStorage()">
        <h2>Votre avancement</h2>
        <div *ngIf="status">
            <p>Candidat : {{status.name}}</p>
            <p>Enquête débuté le {{status.start_time | date:'dd/MM/yyyy HH:mm' }}</p>
            <p *ngIf="status.retreived_tresors.length">Trésors trouvés : </p>
            <p *ngIf="!status.retreived_tresors.length">Aucun trésors trouvés</p>
            <p *ngFor="let item of status.retreived_tresors">- {{item}}</p>
        </div>
    </div>
    <div class="main-content">
        <div class="main-content border">
            <ng-container *ngIf="!getTokenFromStorage()">
                <h1>Bienvenue sur Web Services Game</h1>
                <div>
                    <p>{{response?.presentation}}</p>
                </div>
                <mat-form-field appearance="outline">
                    <mat-label>Identifiant</mat-label>
                    <input matInput [(ngModel)]="loginModel.username" type="email" placeholder="Ex. pat@example.com">
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Mot de passe</mat-label>
                    <input matInput [(ngModel)]="loginModel.password" type="password" placeholder="Ex. azerty">
                </mat-form-field>
                <button (click)="register()">Inscription</button>
            </ng-container>

            <ng-container *ngIf="getTokenFromStorage()">
                <h3 style="margin-bottom: 0;">Choississez une url à visiter</h3>
                <mat-form-field appearance="outline">
                    <mat-label>Quel endroit souhaitez vous visiter ?</mat-label>
                    <mat-select [(ngModel)]="selectedRoute">
                        <mat-option *ngFor="let item of routesResponse" [value]="item">
                            {{item}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <div class="btn-row">
                    <ng-container *ngIf="selectedRoute === '/coffre'">
                        <button mat-button (click)="coffre('post')">POST</button>
                        <button mat-button (click)="coffre('get')">GET</button>
                        <button mat-button (click)="coffre('delete')">DELETE</button>
                        <button mat-button (click)="coffre('options')">OPTIONS</button>
                    </ng-container>
                </div>
            </ng-container>
        </div>
        <div class="main-content border">
            <h3>Résultat de vos requêtes</h3>
            <p>{{this.response?.presentation}}</p>
        </div>
    </div>
</div>